<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Educatif MIKN â€” Connexion</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="login-page">

  <div class="login-container">
    <div class="login-card">

      <!-- Logo -->
      <div style="text-align:center;margin-bottom:24px">
        <div style="width:58px;height:58px;background:var(--orange);border-radius:16px;display:inline-flex;align-items:center;justify-content:center;font-size:26px;font-weight:900;color:#fff;margin-bottom:10px">M</div>
        <h1 style="font-size:22px;font-weight:800;margin:0">Educatif MIKN</h1>
        <p style="color:var(--text-muted);font-size:13px;margin-top:4px">Plateforme Ã©ducative intelligente</p>
      </div>

      <!-- Tabs auth -->
      <div style="display:flex;border-bottom:2px solid var(--border);margin-bottom:22px">
        <button id="tabLogin" onclick="switchAuthTab('login')"
          style="flex:1;padding:10px 6px;background:none;border:none;border-bottom:3px solid var(--orange);margin-bottom:-2px;font-size:14px;font-weight:700;cursor:pointer;color:var(--text)">
          ğŸ” Se connecter
        </button>
        <button id="tabRegister" onclick="switchAuthTab('register')"
          style="flex:1;padding:10px 6px;background:none;border:none;border-bottom:3px solid transparent;margin-bottom:-2px;font-size:14px;font-weight:600;cursor:pointer;color:var(--text-muted)">
          âœ¨ CrÃ©er un compte
        </button>
      </div>

      <!-- â•â•â• CONNEXION â•â•â• -->
      <div id="sectionLogin">
        <div style="display:flex;gap:6px;margin-bottom:18px">
          <button data-role="teacher" class="role-tab active"
            style="flex:1;padding:8px 4px;border-radius:8px;border:2px solid var(--orange);background:var(--bg-card);font-size:12px;cursor:pointer;font-weight:700">
            ğŸ‘©â€ğŸ« Professeur
          </button>
          <button data-role="parent" class="role-tab"
            style="flex:1;padding:8px 4px;border-radius:8px;border:2px solid var(--border);background:var(--bg-card);font-size:12px;cursor:pointer;font-weight:600">
            ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent
          </button>
          <button data-role="admin" class="role-tab"
            style="flex:1;padding:8px 4px;border-radius:8px;border:2px solid var(--border);background:var(--bg-card);font-size:12px;cursor:pointer;font-weight:600">
            ğŸ›¡ï¸ Admin
          </button>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" class="input" placeholder="ton@email.fr" autocomplete="email">
        </div>
        <div class="form-group">
          <label>Mot de passe</label>
          <input type="password" id="password" class="input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password">
        </div>
        <button id="loginBtn" class="btn" style="width:100%;margin-top:8px">Connexion â†’</button>
        <button id="forgotBtn" class="btn btn-secondary" style="width:100%;margin-top:8px;font-size:13px">Mot de passe oubliÃ© ?</button>
      </div>

      <!-- â•â•â• INSCRIPTION â•â•â• -->
      <div id="sectionRegister" style="display:none">

        <!-- Badge plan Free -->
        <div style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:1.5px solid #86efac;border-radius:12px;padding:14px 16px;margin-bottom:20px;text-align:center">
          <div style="font-size:24px;margin-bottom:4px">ğŸ†“</div>
          <div style="font-weight:800;font-size:14px;color:#15803d">Plan Free â€” Toujours gratuit</div>
          <div style="font-size:12px;color:#166534;margin-top:6px;line-height:1.6">
            âœ… 2 classes &nbsp;â€¢&nbsp; âœ… 20 Ã©lÃ¨ves max<br>
            âœ… 10 Ã©valuations &nbsp;â€¢&nbsp; âœ… 5 activitÃ©s<br>
            âœ… Quiz inclus &nbsp;â€¢&nbsp; âŒ Plan de salle (Pro)
          </div>
        </div>

        <div class="form-group">
          <label>Nom complet</label>
          <input type="text" id="regFullName" class="input" placeholder="PrÃ©nom Nom">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="regEmail" class="input" placeholder="ton@email.fr" autocomplete="email">
        </div>
        <div class="form-group">
          <label>Mot de passe <span style="color:var(--text-muted);font-size:11px">(min. 8 caractÃ¨res)</span></label>
          <input type="password" id="regPassword" class="input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>
        <div class="form-group">
          <label>Confirmer le mot de passe</label>
          <input type="password" id="regPasswordConfirm" class="input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>
        <button id="registerBtn" class="btn" style="width:100%;margin-top:8px">
          CrÃ©er mon compte gratuit â†’
        </button>
        <p style="font-size:11px;color:var(--text-muted);text-align:center;margin-top:14px;line-height:1.6">
          En crÃ©ant un compte, tu acceptes les conditions d'utilisation.<br>
          Passage au plan <strong>Pro</strong> possible Ã  tout moment depuis l'application.
        </p>
      </div>

    </div>

    <div style="text-align:center;margin-top:16px">
      <button id="themeBtn" class="btn-icon" style="font-size:20px">ğŸŒ™</button>
    </div>
  </div>

  <div id="toast" class="toast"><strong id="toastTitle"></strong><p id="toastMsg"></p></div>

  <script src="app.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (typeof initIndex === "function") initIndex();
    });

    function switchAuthTab(tab) {
      const isLogin = tab === "login";
      document.getElementById("sectionLogin").style.display    = isLogin ? "block" : "none";
      document.getElementById("sectionRegister").style.display = isLogin ? "none"  : "block";
      const tL = document.getElementById("tabLogin");
      const tR = document.getElementById("tabRegister");
      tL.style.borderBottomColor = isLogin ? "var(--orange)" : "transparent";
      tL.style.color             = isLogin ? "var(--text)"   : "var(--text-muted)";
      tL.style.fontWeight        = isLogin ? "700" : "600";
      tR.style.borderBottomColor = isLogin ? "transparent"   : "var(--orange)";
      tR.style.color             = isLogin ? "var(--text-muted)" : "var(--text)";
      tR.style.fontWeight        = isLogin ? "600" : "700";
    }
  </script>
</body>
</html>
